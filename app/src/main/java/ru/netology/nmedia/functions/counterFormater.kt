package ru.netology.nmedia.functions

/**
 * Форматирует числовые счётчики (лайки, просмотры, репосты) в компактный читаемый вид.
 * Примеры:
 * - 999 → "999"
 * - 1050 → "1K"
 * - 2340 → "2.3K"
 * - 15000 → "15K"
 * - 1_050_000 → "1M"
 * - 2_340_000 → "2.3M"
 *
 * Особенности:
 * - Значения от 1000 до 1099 округляются до "1K" (аналогично для миллионов).
 * - От 1100 до 9999 форматируются с одной цифрой после точки (десятки тысяч не округляются, а усекаются).
 * - От 10_000 до 999_999 отображаются как целое число тысяч без дробной части.
 * - Аналогичная логика применяется для миллионов (≥ 1_000_000).
 *
 * @param count исходное целое число (ожидается неотрицательное)
 * @return строковое представление в сокращённой форме с суффиксами "K" или "M"
 */
fun counterFormatter(count: Int): String {
    return when {
        count < 1000 -> count.toString()
        count < 1100 -> "1K"
        count < 10_000 -> {
            val thousands = count / 1000
            val hundreds = (count % 1000) / 100
            "${thousands}.${hundreds}K"
        }
        count < 1_000_000 -> {
            "${count / 1000}K"
        }
        count < 1_100_000 -> "1M"
        else -> {
            val millions = count / 1_000_000
            val hundredThousands = (count % 1_000_000) / 100_000
            "${millions}.${hundredThousands}M"
        }
    }
}